<script>
    function favorite(el) {
        el.style.display = "none"
        // document.querySelector(`filled_heart$`).style.display = "block"
        el.nextElementSibling.style.display = "block"
        console.log("favorite", el)
    }    
    
   function unfavorite(el) {
        el.style.display = "none"
        el.previousElementSibling.style.display = "block"
        console.log("unfavorite", el)
    }
</script>

<h1>Dashboard Search</h1>

<%= render "queries" %>
<div class="recipe_response">

    <% @paginatable_array.map do |recipe| %>
        <%= link_to recipe['recipe']['url'] do %>
            <div class="recipe_block">
                <%= link_to @recipe_url = recipe['recipe']['url'] do %>
                    <div class="recipe_link_block">
                        <h4><%= @recipe_name = recipe['recipe']['label'] %></h4>
                        <img src="<%= @recipe_image = recipe['recipe']['image'] %>"/> </br>
                    </div>
                <% end %> 
                <% @recipe_text = recipe['recipe']['ingredients'] %>
                        <% i = 0 %>
                        <% @ingredients = '' %>
                            <% while i < @recipe_text.count do %>
                                <% if i == 0 %>
                                    <% @ingredients.concat("#{@recipe_text[i]['food'].capitalize} ") %>
                                <% elsif i == @recipe_text.count - 1 %>
                                    <% @ingredients.concat("and #{@recipe_text[i]['food'].downcase}.") %>
                                <% else %>
                                    <% @ingredients.concat("#{@recipe_text[i]['food'].downcase}, ") %>
                                <% end %>
                                <% i += 1 %>
                            <% end %> </br>
                        
                        <h5 class="ingredients_h5"> Ingredients: <span> <%= @ingredients %> </span> </h5>
                <i class="fa-regular fa-heart empty_heart" id="empty_heart" onclick="favorite(this)"></i>
                <i class="fa-solid fa-heart filled_heart" id="filled_heart" onclick="unfavorite(this)"></i>
            </div>
        <% end %> 

    <% end %> 
</div>

<%= paginate @paginatable_array %>

